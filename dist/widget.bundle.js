(()=>{"use strict";var t={events:{},on:function(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)},emit:function(t,n){this.events[t]&&this.events[t].forEach((function(t){return t(n)}))}};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function e(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}function r(t){var n="function"==typeof Map?new Map:void 0;return r=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(i())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,n);var r=new(t.bind.apply(t,o));return e&&c(r,e.prototype),r}(t,arguments,a(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),c(e,t)},r(t)}function i(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(i=function(){return!!t})()}function c(t,n){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},c(t,n)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}var u=function(o){function r(){var t;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),(t=function(t,e,o){return e=a(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,i()?Reflect.construct(e,o||[],a(t).constructor):e.apply(t,o))}(this,r)).attachShadow({mode:"open"});var e=document.createElement("style");e.textContent="\n      button {\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        background-color: #111f2a;\n        color: black;\n        border: none;\n        border-radius: 50%;\n        width: 60px;\n        height: 60px;\n        font-size: 24px;\n        font-family: 'Roboto', sans-serif;\n        font-style: italic;\n        cursor: pointer;\n        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        overflow: hidden;\n        z-index: 9999;\n        margin-bottom: 10px; \n        transition: background-color 0.3s, transform 0.3s;\n      }\n\n      button.open {\n        background-color: #ff6347; \n        transform: translateY(2px) rotate(180deg); \n      }\n\n      img {\n        width: 48px;\n        height: 48px;\n        border-radius: 50%; \n        object-fit: cover; \n        display: block; /* Ensure the image is displayed as a block element */\n        transition: opacity 0.3s;\n      }\n\n      .close-icon {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        transition: opacity 0.3s;\n        color: black;\n      }\n\n      .close-icon:before {\n        content: '';\n        width: 0;\n        height: 0;\n        border-left: 10px solid transparent;\n        border-right: 10px solid transparent;\n        border-bottom: 10px solid white;\n      }\n\n      button.open .close-icon {\n        opacity: 1;\n      }\n\n      button.open img {\n        opacity: 0;\n      }\n\n      @media (max-width: 768px) {\n        button {\n          bottom: 10px;\n          right: 10px;\n        }\n      }\n    ";var o=document.createElement("button");t.button=o;var c=document.createElement("div");return c.classList.add("close-icon"),t.closeIcon=c,t.shadowRoot.append(e,o),t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&c(t,n)}(r,o),u=r,(s=[{key:"connectedCallback",value:function(){var n=this,e=this.getAttribute("img-url"),o=this.getAttribute("background-color")||"#111f2a";if(this.button.style.backgroundColor=o,this.button.innerHTML="",e){var r=document.createElement("img");r.src=e,r.alt="Chat Icon",r.onerror=function(){console.error("Failed to load image at ".concat(e)),n.button.innerHTML="AI"},r.onload=function(){n.button.appendChild(r),n.button.appendChild(n.closeIcon)}}else this.button.innerHTML="AI",this.button.appendChild(this.closeIcon);this.button.addEventListener("click",this.toggleChat.bind(this)),t.on("open-chat",this.openChat.bind(this)),t.on("close-chat",this.closeChat.bind(this))}},{key:"toggleChat",value:function(){this.button.classList.contains("open")?t.emit("close-chat"):t.emit("open-chat",{playSound:!0})}},{key:"openChat",value:function(){this.button.classList.add("open")}},{key:"closeChat",value:function(){this.button.classList.remove("open")}}])&&e(u.prototype,s),Object.defineProperty(u,"prototype",{writable:!1}),u;var u,s}(r(HTMLElement));function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,f(o.key),o)}}function f(t){var n=function(t,n){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(n)?n:n+""}function p(t){var n="function"==typeof Map?new Map:void 0;return p=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(d())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,n);var r=new(t.bind.apply(t,o));return e&&b(r,e.prototype),r}(t,arguments,h(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),b(e,t)},p(t)}function d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(d=function(){return!!t})()}function b(t,n){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},b(t,n)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}customElements.define("chat-button",u);var y=function(n){function e(){var t;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,n,e){return n=h(n),function(t,n){if(n&&("object"==s(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,d()?Reflect.construct(n,e||[],h(t).constructor):n.apply(t,e))}(this,e)).attachShadow({mode:"open"});var n=document.createElement("style");n.textContent="\n      @keyframes fadeInSlideUp {\n        0% {\n          opacity: 0;\n          transform: translateY(20px);\n        }\n        100% {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n\n      @keyframes fadeOutSlideDown {\n        0% {\n          opacity: 1;\n          transform: translateY(0);\n        }\n        100% {\n          opacity: 0;\n          transform: translateY(20px);\n        }\n      }\n\n      iframe {\n        display: none;\n        position: fixed;\n        bottom: 120px;\n        right: 20px;\n        width: 400px;\n        height: 600px;\n        border: none;\n        border-radius: 10px;\n        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n        z-index: 9998; /* Set lower z-index than the button */\n        background: white;\n        max-height: calc(100vh - 140px); /* Adjust height to fit the screen */\n      }\n\n      iframe.show {\n        display: block;\n        animation: fadeInSlideUp 0.6s forwards;\n      }\n\n      iframe.hide {\n        animation: fadeOutSlideDown 0.6s forwards;\n        display: block; /* Ensure it's visible during animation */\n      }\n\n      @media (max-width: 768px) {\n        iframe {\n          top: 0; /* Fill the screen */\n          right: 0;\n          width: 100%;\n          height: calc(100% - 100px); /* Adjust height to leave space for the button */\n          border-radius: 0;\n          max-height: none; /* Remove max-height constraint for mobile view */\n        }\n      }\n\n      @media (max-height: 700px) {\n        iframe {\n          height: calc(100vh - 140px); /* Adjust height to fit the screen */\n        }\n      }\n    ";var o=document.createElement("iframe");return t.shadowRoot.append(n,o),t.iframe=o,t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&b(t,n)}(e,n),o=e,(r=[{key:"connectedCallback",value:function(){var n=this;this.iframe.src="https://www.example.ai/",t.on("open-chat",(function(){n.iframe.style.display="block",n.iframe.classList.remove("hide"),n.iframe.classList.add("show")})),t.on("close-chat",(function(){n.iframe.classList.remove("show"),n.iframe.classList.add("hide"),n.iframe.addEventListener("animationend",(function(){n.iframe.classList.contains("hide")&&(n.iframe.style.display="none")}),{once:!0})}))}}])&&l(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}(p(HTMLElement));function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,w(o.key),o)}}function w(t){var n=function(t,n){if("object"!=m(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=m(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(n)?n:n+""}function g(t){var n="function"==typeof Map?new Map:void 0;return g=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(x())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,n);var r=new(t.bind.apply(t,o));return e&&O(r,e.prototype),r}(t,arguments,j(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),O(e,t)},g(t)}function x(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(x=function(){return!!t})()}function O(t,n){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},O(t,n)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}customElements.define("chat-iframe",y);var S=function(n){function e(){var t;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,n,e){return n=j(n),function(t,n){if(n&&("object"==m(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,x()?Reflect.construct(n,e||[],j(t).constructor):n.apply(t,e))}(this,e)).attachShadow({mode:"open"}),t.timeoutId=null,t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&O(t,n)}(e,n),o=e,(r=[{key:"connectedCallback",value:function(){var n=this;if(!this.shadowRoot.querySelector("chat-button")){var e=document.createElement("chat-button"),o=document.createElement("chat-iframe"),r=this.getAttribute("img-url"),i=this.getAttribute("background-color"),c=parseInt(this.getAttribute("popup-delay"),10),a=this.getAttribute("sound-url");r&&e.setAttribute("img-url",r),i&&e.setAttribute("background-color",i),this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(o),t.on("open-chat",(function(t){o.style.display="block",o.classList.remove("hide"),o.classList.add("show"),n.timeoutId&&(clearTimeout(n.timeoutId),n.timeoutId=null),a&&t&&t.playSound&&new Audio(a).play()})),t.on("close-chat",(function(){o.classList.remove("show"),o.classList.add("hide"),o.addEventListener("animationend",(function(){o.classList.contains("hide")&&(o.style.display="none")}),{once:!0})})),c&&!isNaN(c)&&(this.timeoutId=setTimeout((function(){e.classList.contains("open")||t.emit("open-chat",{playSound:!0})}),1e3*c))}}}])&&v(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}(g(HTMLElement));customElements.define("chat-widget",S),document.addEventListener("DOMContentLoaded",(function(){document.addEventListener("click",(function(t){t.target.tagName.toLowerCase()})),document.addEventListener("focusin",(function(t){t.target.tagName.toLowerCase()}))}))})();